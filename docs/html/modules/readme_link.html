

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4. Readme File &mdash; LOVE-manager 0.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. ApiDoc" href="../apidoc/modules.html" />
    <link rel="prev" title="3. How it works" href="how_it_works.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> LOVE-manager
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="how_to_use_it.html">2. How to use it</a></li>
<li class="toctree-l1"><a class="reference internal" href="how_it_works.html">3. How it works</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. Readme File</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#use-as-part-of-the-love-system">4.1. Use as part of the LOVE system</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#initialize-environment-variables">4.1.1. Initialize Environment variables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#local-load-for-development">4.2. Local load for development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#load-and-get-into-the-docker-image">4.2.1. Load and get into the docker image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-tests">4.2.2. Run tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-documentation">4.2.3. Build documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/modules.html">5. ApiDoc</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">LOVE-manager</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>4. Readme File</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/modules/readme_link.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="readme-file">
<h1>4. Readme File<a class="headerlink" href="#readme-file" title="Permalink to this headline">¶</a></h1>
<p>This repository contains the code of the Django Channels project that acts as middleware for the LOVE-frontend</p>
<p>See the documentation here: <a class="reference external" href="https://lsst-ts.github.io/LOVE-manager/html/index.html">https://lsst-ts.github.io/LOVE-manager/html/index.html</a></p>
<div class="section" id="use-as-part-of-the-love-system">
<h2>4.1. Use as part of the LOVE system<a class="headerlink" href="#use-as-part-of-the-love-system" title="Permalink to this headline">¶</a></h2>
<p>In order to use the LOVE-manager as part of the LOVE system we recommend to use the docker-compose and configuration files provided in the <a class="reference external" href="https://github.com/lsst-ts/LOVE-integration-tools">LOVE-integration-tools</a> repo. Please follow the instructions there.</p>
<div class="section" id="initialize-environment-variables">
<h3>4.1.1. Initialize Environment variables<a class="headerlink" href="#initialize-environment-variables" title="Permalink to this headline">¶</a></h3>
<p>In order to use the LOVE-manager, some environment variables must be defined before it is run.
All these variables are initialized with default variables defined in <code class="code docutils literal notranslate"><span class="pre">.env</span></code> files defined in the corresponding deployment environment defined in <a class="reference external" href="https://github.com/lsst-ts/LOVE-integration-tools">LOVE-integration-tools</a>. The are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ADMIN_USER_PASS</span></code>: password for the default <code class="docutils literal notranslate"><span class="pre">admin</span></code> user, which has every permission.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">USER_USER_PASS</span></code>: password for the default <code class="docutils literal notranslate"><span class="pre">user</span></code> user, which has readonly permissions and cannot execute commands.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMD_USER_PASS</span></code>: password for the default <code class="docutils literal notranslate"><span class="pre">cmd</span></code> user, which has readonly permissions but can execute commands.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LOVE_MANAGER_REDIS_HOST</span></code>: the location of the redis host that implements the <code class="docutils literal notranslate"><span class="pre">Channels</span> <span class="pre">Layer</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">REDIS_PASS</span></code>: the password that the LOVE-manager needs to use to connect with <code class="docutils literal notranslate"><span class="pre">redis</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PROCESS_CONNECTION_PASS</span></code>: the password that the LOVE-producer will use to establish a websocket connection with the LOVE-manager.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENGINE</span></code>: describe which database engine should be used. If its value is <code class="docutils literal notranslate"><span class="pre">postgresql</span></code> Postgres will be used, otherwise it will use Sqlite3.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_NAME</span></code>: defines the name of the Database. Only used if <code class="docutils literal notranslate"><span class="pre">DB_ENGINE=postgresql</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_USER</span></code>: defines the user of the Database. Only used if <code class="docutils literal notranslate"><span class="pre">DB_ENGINE=postgresql</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_PASS</span></code>: defines the password of the Database. Only used if <code class="docutils literal notranslate"><span class="pre">DB_ENGINE=postgresql</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_HOST</span></code>: defines the host of the Database. Only used if <code class="docutils literal notranslate"><span class="pre">DB_ENGINE=postgresql</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_PORT</span></code>: defines the port of the Database. Only used if <code class="docutils literal notranslate"><span class="pre">DB_ENGINE=postgresql</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NO_DEBUG</span></code>: defines wether or not the LOVE-.manager will be run using Django’s debug mode. If the variable is defined, then Debug mode will be off.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SECRET_KEY</span></code>: overrides Django’s SECRET_KEY, if not defined the default value (public in this repo) will be used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AUTH_LDAP_SERVER_URI</span></code>: (deprecated) the location of the LDAP authentication server. No LDAP server is used if this variable is empty</p></li>
</ul>
</div>
</div>
<div class="section" id="local-load-for-development">
<h2>4.2. Local load for development<a class="headerlink" href="#local-load-for-development" title="Permalink to this headline">¶</a></h2>
<p>We provide a docker image and a docker-compose file in order to load the LOVE-manager with a Postgres database locally, for development purposes, such as run tests and build documentation.</p>
<p>This docker-compose does not copy the code into the image, but instead it mounts the repository inside the image, this way you can edit the code from outside the docker container with no need to rebuild or restart.</p>
<div class="section" id="load-and-get-into-the-docker-image">
<h3>4.2.1. Load and get into the docker image<a class="headerlink" href="#load-and-get-into-the-docker-image" title="Permalink to this headline">¶</a></h3>
<p>Follow these instructions to run the application in a docker container and get into it:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span><span class="o">-</span><span class="n">compose</span> <span class="n">up</span> <span class="o">-</span><span class="n">d</span>
<span class="n">docker</span><span class="o">-</span><span class="k">exec</span> <span class="n">manager</span> <span class="n">bash</span>
</pre></div>
</div>
</div>
<div class="section" id="run-tests">
<h3>4.2.2. Run tests<a class="headerlink" href="#run-tests" title="Permalink to this headline">¶</a></h3>
<p>Once inside the container you will be in the <code class="docutils literal notranslate"><span class="pre">/usr/src/love/manager</span></code> folder, where you can run the tests as follows:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span>
</pre></div>
</div>
</div>
<div class="section" id="build-documentation">
<h3>4.2.3. Build documentation<a class="headerlink" href="#build-documentation" title="Permalink to this headline">¶</a></h3>
<p>Once inside the container you will be in the <code class="docutils literal notranslate"><span class="pre">/usr/src/love/manager</span></code> folder, where you can move out to the <code class="docutils literal notranslate"><span class="pre">docsrc</span></code> folder and build the documentation as follows:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="p">..</span><span class="o">/</span><span class="n">docsrc</span>
<span class="p">.</span><span class="o">/</span><span class="n">create_docs</span><span class="p">.</span><span class="n">sh</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../apidoc/modules.html" class="btn btn-neutral float-right" title="5. ApiDoc" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="how_it_works.html" class="btn btn-neutral float-left" title="3. How it works" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Inria Chile

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>